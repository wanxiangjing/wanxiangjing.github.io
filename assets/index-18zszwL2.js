import{j as e,u as r,a as i}from"./index-DLuxAid6.js";import{a as l,u as d}from"./react-vendor-BY2yH0eA.js";import{b as a,c as _,d as h,T as x}from"./ui-vendor-CtpJTzpL.js";import{f as j,u as N}from"./redux-vendor-C-18dVXr.js";import"./utils-vendor-NIGUFBhG.js";import"./rtc-vendor-Co3qY2HD.js";const b="_container_rllpl_1",g="_content_rllpl_17",k="_title_rllpl_24",v="_phone_rllpl_32",f="_phoneScreen_rllpl_44",B="_permissionIconWrapper_rllpl_59",E="_icon_rllpl_69",I="_okIcon_rllpl_73",C="_connector_rllpl_79",P="_phoneButton1_rllpl_91",S="_phoneButton2_rllpl_101",W="_description_rllpl_111",y="_note_rllpl_119",R="_buttonContainer_rllpl_126",O="_permissionButton_rllpl_131",T="_backgroundElement1_rllpl_153",q="_backgroundElement2_rllpl_165",n={container:b,content:g,title:k,phone:v,phoneScreen:f,permissionIconWrapper:B,icon:E,okIcon:I,connector:C,phoneButton1:P,phoneButton2:S,description:W,note:y,buttonContainer:R,permissionButton:O,backgroundElement1:T,backgroundElement2:q},F=()=>{const c=l.useRef(null),{cameraPermission:o,microphonePermission:s}=j(u=>u.global),t=N(),p=d(),m=()=>{console.log("请求摄像头和麦克风权限"),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(()=>{t(r(!0)),t(i(!0)),setTimeout(()=>{p("/room")},1e3)}).catch(()=>{x.show({icon:"error",content:"权限请求失败,请重试"}),t(r(!1)),t(i(!1))})};return l.useEffect(()=>{o&&s&&c.current&&(c.current.style.width="50%")},[o,s]),e.jsxs("div",{className:n.container,id:"permission-screen",children:[e.jsxs("div",{className:n.content,children:[e.jsx("h2",{className:n.title,children:"开启智能导览"}),e.jsxs("div",{className:n.phone,children:[e.jsxs("div",{className:n.phoneScreen,children:[e.jsx("div",{className:n.permissionIconWrapper,id:"camera-permission",style:{backgroundColor:o?"#52c41a":"auto"},children:o?e.jsx(a,{className:n.okIcon}):e.jsx(_,{className:n.icon})}),e.jsx("div",{className:n.permissionIconWrapper,id:"mic-permission",style:{backgroundColor:s?"#52c41a":"auto"},children:s?e.jsx(a,{className:n.okIcon}):e.jsx(h,{className:n.icon})}),e.jsx("div",{ref:c,className:n.connector,id:"permission-connector"})]}),e.jsx("div",{className:n.phoneButton1}),e.jsx("div",{className:n.phoneButton2})]}),e.jsx("p",{className:n.description,children:"为了提供AI讲解服务，需要开启麦克风和摄像头权限"}),e.jsx("p",{className:n.note,children:"我们高度重视您的隐私，所有数据仅用于为您提供服务"})]}),e.jsx("div",{className:n.buttonContainer,children:e.jsx("button",{className:n.permissionButton,id:"request-permissions",onClick:m,children:"一键开启权限"})}),e.jsx("div",{className:n.backgroundElement1}),e.jsx("div",{className:n.backgroundElement2})]})};export{F as default};
