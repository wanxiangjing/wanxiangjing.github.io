import{a as Qe}from"./utils-vendor-NIGUFBhG.js";import{U as xe,V as et,m as me,e as tt,W as rt,w as ze,X as nt,Y as ot,_ as st,A as at,c as V,C as X,Z as _e,$ as it}from"./index-D7XsvT8O.js";import{a as g,R as b}from"./store-vendor-C5eEuSGF.js";var ut=function(){var e=g.useRef(!1);return g.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]),e};const be=10;function ct(e,t){return e>t&&e>be?"horizontal":t>e&&t>be?"vertical":""}function lt(){const e=g.useRef(0),t=g.useRef(0),r=g.useRef(0),n=g.useRef(0),o=g.useRef(0),a=g.useRef(0),s=g.useRef(""),u=()=>s.current==="vertical",i=()=>s.current==="horizontal",c=()=>{r.current=0,n.current=0,o.current=0,a.current=0,s.current=""};return{move:p=>{const y=p.touches[0];r.current=y.clientX<0?0:y.clientX-e.current,n.current=y.clientY-t.current,o.current=Math.abs(r.current),a.current=Math.abs(n.current),s.current||(s.current=ct(o.current,a.current))},start:p=>{c(),e.current=p.touches[0].clientX,t.current=p.touches[0].clientY},reset:c,startX:e,startY:t,deltaX:r,deltaY:n,offsetX:o,offsetY:a,direction:s,isVertical:u,isHorizontal:i}}const ft=xe?window:void 0,pt=["scroll","auto","overlay"];function dt(e){return e.nodeType===1}function vt(e,t=ft){let r=e;for(;r&&r!==t&&dt(r);){if(r===document.body)return t;const{overflowY:n}=window.getComputedStyle(r);if(pt.includes(n)&&r.scrollHeight>r.clientHeight)return r;r=r.parentNode}return t}let ge=!1;if(xe)try{const e={};Object.defineProperty(e,"passive",{get(){ge=!0}}),window.addEventListener("test-passive",null,e)}catch{}let G=0;const Re="adm-overflow-hidden";function ht(e){let t=e?.parentElement;for(;t;){if(t.clientHeight<t.scrollHeight)return t;t=t.parentElement}return null}function yt(e,t){const r=lt(),n=s=>{r.move(s);const u=r.deltaY.current>0?"10":"01",i=vt(s.target,e.current);if(!i)return;if(t==="strict"){const h=ht(s.target);if(h===document.body||h===document.documentElement){s.preventDefault();return}}const{scrollHeight:c,offsetHeight:l,scrollTop:f}=i,{height:p}=i.getBoundingClientRect();let y="11";f===0?y=l>=c?"00":"01":c<=Math.round(p+f)&&(y="10"),y!=="11"&&r.isVertical()&&!(parseInt(y,2)&parseInt(u,2))&&s.cancelable&&ge&&s.preventDefault()},o=()=>{document.addEventListener("touchstart",r.start),document.addEventListener("touchmove",n,ge?{passive:!1}:!1),G||document.body.classList.add(Re),G++},a=()=>{G&&(document.removeEventListener("touchstart",r.start),document.removeEventListener("touchmove",n),G--,G||document.body.classList.remove(Re))};g.useEffect(()=>{if(t)return o(),()=>{a()}},[t])}function gt(e){return(typeof e=="function"?e():e)||document.body}function xt(e,t){if(xe&&e){const r=gt(e);return et.createPortal(t,r)}return t}function mt(e){const t=g.useRef(e);return e&&(t.current=!0),!!t.current}const _t=e=>bt(e.active,e.forceRender,e.destroyOnClose)?e.children:null;function bt(e,t,r){const n=mt(e);return t||e?!0:n?!r:!1}const Rt={click:"onClick",touchstart:"onTouchStart"};function wt(e,t){const r=Object.assign({},t.props);for(const n of e){const o=Rt[n];r[o]=function(a){var s,u;a.stopPropagation(),(u=(s=t.props)[o])===null||u===void 0||u.call(s,a)}}return b.cloneElement(t,r)}const Z="adm-mask",kt={default:.55,thin:.35,thick:.75},Et={black:"0, 0, 0",white:"255, 255, 255"},Ot={visible:!0,destroyOnClose:!1,forceRender:!1,color:"black",opacity:"default",disableBodyScroll:!0,getContainer:null,stopPropagation:["click"]},Ct=e=>{const t=me(Ot,e),{locale:r}=tt(),n=g.useRef(null);yt(n,t.visible&&t.disableBodyScroll);const o=g.useMemo(()=>{var l;const f=(l=kt[t.opacity])!==null&&l!==void 0?l:t.opacity,p=Et[t.color];return p?`rgba(${p}, ${f})`:t.color},[t.color,t.opacity]),[a,s]=g.useState(t.visible),u=ut(),{opacity:i}=rt({opacity:t.visible?1:0,config:{precision:.01,mass:1,tension:250,friction:30,clamp:!0},onStart:()=>{s(!0)},onRest:()=>{var l,f;u.current||(s(t.visible),t.visible?(l=t.afterShow)===null||l===void 0||l.call(t):(f=t.afterClose)===null||f===void 0||f.call(t))}}),c=wt(t.stopPropagation,ze(t,b.createElement(nt.div,{className:Z,ref:n,"aria-hidden":!0,style:Object.assign(Object.assign({},t.style),{background:o,opacity:i,display:a?void 0:"none"}),onClick:l=>{var f;l.target===l.currentTarget&&((f=t.onMaskClick)===null||f===void 0||f.call(t,l))}},t.onMaskClick&&b.createElement("div",{className:`${Z}-aria-button`,role:"button","aria-label":r.Mask.name,onClick:t.onMaskClick}),b.createElement("div",{className:`${Z}-content`},t.children))));return b.createElement(_t,{active:a,forceRender:t.forceRender,destroyOnClose:t.destroyOnClose},xt(t.getContainer,c))};function Tt(e){return g.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{style:Object.assign({verticalAlign:"-0.125em"},e.style),className:["antd-mobile-icon",e.className].filter(Boolean).join(" ")}),g.createElement("g",{id:"CheckOutline-CheckOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},g.createElement("g",{id:"CheckOutline-编组"},g.createElement("rect",{id:"CheckOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),g.createElement("path",{d:"M44.309608,12.6841286 L21.2180499,35.5661955 L21.2180499,35.5661955 C20.6343343,36.1446015 19.6879443,36.1446015 19.1042286,35.5661955 C19.0538201,35.5162456 19.0077648,35.4636155 18.9660627,35.4087682 C18.9113105,35.368106 18.8584669,35.3226694 18.808302,35.2729607 L3.6903839,20.2920499 C3.53346476,20.1365529 3.53231192,19.8832895 3.68780898,19.7263704 C3.7629255,19.6505669 3.86521855,19.6079227 3.97193622,19.6079227 L7.06238923,19.6079227 C7.16784214,19.6079227 7.26902895,19.6495648 7.34393561,19.7237896 L20.160443,32.4236157 L20.160443,32.4236157 L40.656066,12.115858 C40.7309719,12.0416387 40.8321549,12 40.9376034,12 L44.0280571,12 C44.248971,12 44.4280571,12.1790861 44.4280571,12.4 C44.4280571,12.5067183 44.3854124,12.609012 44.309608,12.6841286 Z",id:"CheckOutline-路径",fill:"currentColor",fillRule:"nonzero"}))))}function Pt(e){return g.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{style:Object.assign({verticalAlign:"-0.125em"},e.style),className:["antd-mobile-icon",e.className].filter(Boolean).join(" ")}),g.createElement("g",{id:"CloseOutline-CloseOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},g.createElement("g",{id:"CloseOutline-编组"},g.createElement("rect",{id:"CloseOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),g.createElement("path",{d:"M10.6085104,8.11754663 L24.1768397,21.8195031 L24.1768397,21.8195031 L37.7443031,8.1175556 C37.8194278,8.04168616 37.9217669,7.999 38.0285372,7.999 L41.1040268,7.999 C41.3249407,7.999 41.5040268,8.1780861 41.5040268,8.399 C41.5040268,8.50440471 41.4624226,8.60554929 41.3882578,8.68044752 L26.2773302,23.9408235 L26.2773302,23.9408235 L41.5021975,39.3175645 C41.65763,39.4745475 41.6563731,39.7278104 41.4993901,39.8832429 C41.4244929,39.9574004 41.3233534,39.999 41.2179546,39.999 L38.1434012,39.999 C38.0366291,39.999 37.9342885,39.9563124 37.8591634,39.8804408 L24.1768397,26.0621438 L24.1768397,26.0621438 L10.4936501,39.8804497 C10.4185257,39.9563159 10.3161889,39.999 10.2094212,39.999 L7.13584526,39.999 C6.91493136,39.999 6.73584526,39.8199139 6.73584526,39.599 C6.73584526,39.4936017 6.77744443,39.3924627 6.85160121,39.3175656 L22.0763492,23.9408235 L22.0763492,23.9408235 L6.96554081,8.68044639 C6.81010226,8.52346929 6.81134951,8.27020637 6.9683266,8.11476782 C7.04322474,8.04060377 7.14436883,7.999 7.24977299,7.999 L10.3242852,7.999 C10.4310511,7.999 10.5333863,8.04168267 10.6085104,8.11754663 Z",id:"CloseOutline-路径",fill:"currentColor",fillRule:"nonzero"}))))}var P={},we;function St(){if(we)return P;we=1,Object.defineProperty(P,"__esModule",{value:!0}),P.call=a,P.default=void 0,P.note=n,P.noteOnce=u,P.preMessage=void 0,P.resetWarned=o,P.warning=r,P.warningOnce=s;var e={},t=P.preMessage=function(c){};function r(i,c){}function n(i,c){}function o(){e={}}function a(i,c,l){!c&&!e[l]&&(i(!1,l),e[l]=!0)}function s(i,c){a(r,i,c)}function u(i,c){a(n,i,c)}return s.preMessage=t,s.resetWarned=o,s.noteOnce=u,P.default=s,P}St();var D={},J={exports:{}},Q={exports:{}},ke;function U(){return ke||(ke=1,(function(e){function t(r){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(Q)),Q.exports}var Ee;function jt(){return Ee||(Ee=1,(function(e){var t=U().default;function r(n,o){if(typeof WeakMap=="function")var a=new WeakMap,s=new WeakMap;return(e.exports=r=function(i,c){if(!c&&i&&i.__esModule)return i;var l,f,p={__proto__:null,default:i};if(i===null||t(i)!="object"&&typeof i!="function")return p;if(l=c?s:a){if(l.has(i))return l.get(i);l.set(i,p)}for(var y in i)y!=="default"&&{}.hasOwnProperty.call(i,y)&&((f=(l=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,y))&&(f.get||f.set)?l(p,y,f):p[y]=i[y]);return p},e.exports.__esModule=!0,e.exports.default=e.exports)(n,o)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(J)),J.exports}var ee={exports:{}},Oe;function qt(){return Oe||(Oe=1,(function(e){function t(r){return r&&r.__esModule?r:{default:r}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(ee)),ee.exports}var te={exports:{}},re={exports:{}},Ce;function Ke(){return Ce||(Ce=1,(function(e){function t(r,n){this.v=r,this.k=n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(re)),re.exports}var ne={exports:{}},oe={exports:{}},Te;function He(){return Te||(Te=1,(function(e){function t(r,n,o,a){var s=Object.defineProperty;try{s({},"",{})}catch{s=0}e.exports=t=function(i,c,l,f){function p(y,h){t(i,y,function(_){return this._invoke(y,h,_)})}c?s?s(i,c,{value:l,enumerable:!f,configurable:!f,writable:!f}):i[c]=l:(p("next",0),p("throw",1),p("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n,o,a)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(oe)),oe.exports}var Pe;function Ve(){return Pe||(Pe=1,(function(e){var t=He();function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var n,o,a=typeof Symbol=="function"?Symbol:{},s=a.iterator||"@@iterator",u=a.toStringTag||"@@toStringTag";function i(v,k,m,O){var R=k&&k.prototype instanceof l?k:l,j=Object.create(R.prototype);return t(j,"_invoke",(function(N,K,$){var x,d,w,E=0,I=$||[],F=!1,M={p:0,n:0,v:n,a:W,f:W.bind(n,4),d:function(C,A){return x=C,d=0,w=n,M.n=A,c}};function W(q,C){for(d=q,w=C,o=0;!F&&E&&!A&&o<I.length;o++){var A,T=I[o],H=M.p,Y=T[2];q>3?(A=Y===C)&&(w=T[(d=T[4])?5:(d=3,3)],T[4]=T[5]=n):T[0]<=H&&((A=q<2&&H<T[1])?(d=0,M.v=C,M.n=T[1]):H<Y&&(A=q<3||T[0]>C||C>Y)&&(T[4]=q,T[5]=C,M.n=Y,d=0))}if(A||q>1)return c;throw F=!0,C}return function(q,C,A){if(E>1)throw TypeError("Generator is already running");for(F&&C===1&&W(C,A),d=C,w=A;(o=d<2?n:w)||!F;){x||(d?d<3?(d>1&&(M.n=-1),W(d,w)):M.n=w:M.v=w);try{if(E=2,x){if(d||(q="next"),o=x[q]){if(!(o=o.call(x,w)))throw TypeError("iterator result is not an object");if(!o.done)return o;w=o.value,d<2&&(d=0)}else d===1&&(o=x.return)&&o.call(x),d<2&&(w=TypeError("The iterator does not provide a '"+q+"' method"),d=1);x=n}else if((o=(F=M.n<0)?w:N.call(K,M))!==c)break}catch(T){x=n,d=1,w=T}finally{E=1}}return{value:o,done:F}}})(v,m,O),!0),j}var c={};function l(){}function f(){}function p(){}o=Object.getPrototypeOf;var y=[][s]?o(o([][s]())):(t(o={},s,function(){return this}),o),h=p.prototype=l.prototype=Object.create(y);function _(v){return Object.setPrototypeOf?Object.setPrototypeOf(v,p):(v.__proto__=p,t(v,u,"GeneratorFunction")),v.prototype=Object.create(h),v}return f.prototype=p,t(h,"constructor",p),t(p,"constructor",f),f.displayName="GeneratorFunction",t(p,u,"GeneratorFunction"),t(h),t(h,u,"Generator"),t(h,s,function(){return this}),t(h,"toString",function(){return"[object Generator]"}),(e.exports=r=function(){return{w:i,m:_}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(ne)),ne.exports}var se={exports:{}},ae={exports:{}},ie={exports:{}},Se;function Xe(){return Se||(Se=1,(function(e){var t=Ke(),r=He();function n(o,a){function s(i,c,l,f){try{var p=o[i](c),y=p.value;return y instanceof t?a.resolve(y.v).then(function(h){s("next",h,l,f)},function(h){s("throw",h,l,f)}):a.resolve(y).then(function(h){p.value=h,l(p)},function(h){return s("throw",h,l,f)})}catch(h){f(h)}}var u;this.next||(r(n.prototype),r(n.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),r(this,"_invoke",function(i,c,l){function f(){return new a(function(p,y){s(i,l,p,y)})}return u=u?u.then(f,f):f()},!0)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(ie)),ie.exports}var je;function Ze(){return je||(je=1,(function(e){var t=Ve(),r=Xe();function n(o,a,s,u,i){return new r(t().w(o,a,s,u),i||Promise)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(ae)),ae.exports}var qe;function Mt(){return qe||(qe=1,(function(e){var t=Ze();function r(n,o,a,s,u){var i=t(n,o,a,s,u);return i.next().then(function(c){return c.done?c.value:i.next()})}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(se)),se.exports}var ue={exports:{}},Me;function At(){return Me||(Me=1,(function(e){function t(r){var n=Object(r),o=[];for(var a in n)o.unshift(a);return function s(){for(;o.length;)if((a=o.pop())in n)return s.value=a,s.done=!1,s;return s.done=!0,s}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(ue)),ue.exports}var ce={exports:{}},Ae;function Lt(){return Ae||(Ae=1,(function(e){var t=U().default;function r(n){if(n!=null){var o=n[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],a=0;if(o)return o.call(n);if(typeof n.next=="function")return n;if(!isNaN(n.length))return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}}}throw new TypeError(t(n)+" is not iterable")}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(ce)),ce.exports}var Le;function Nt(){return Le||(Le=1,(function(e){var t=Ke(),r=Ve(),n=Mt(),o=Ze(),a=Xe(),s=At(),u=Lt();function i(){var c=r(),l=c.m(i),f=(Object.getPrototypeOf?Object.getPrototypeOf(l):l.__proto__).constructor;function p(_){var v=typeof _=="function"&&_.constructor;return!!v&&(v===f||(v.displayName||v.name)==="GeneratorFunction")}var y={throw:1,return:2,break:3,continue:3};function h(_){var v,k;return function(m){v||(v={stop:function(){return k(m.a,2)},catch:function(){return m.v},abrupt:function(R,j){return k(m.a,y[R],j)},delegateYield:function(R,j,N){return v.resultName=j,k(m.d,u(R),N)},finish:function(R){return k(m.f,R)}},k=function(R,j,N){m.p=v.prev,m.n=v.next;try{return R(j,N)}finally{v.next=m.n}}),v.resultName&&(v[v.resultName]=m.v,v.resultName=void 0),v.sent=m.v,v.next=m.n;try{return _.call(this,v)}finally{m.p=v.prev,m.n=v.next}}}return(e.exports=i=function(){return{wrap:function(k,m,O,R){return c.w(h(k),m,O,R&&R.reverse())},isGeneratorFunction:p,mark:c.m,awrap:function(k,m){return new t(k,m)},AsyncIterator:a,async:function(k,m,O,R,j){return(p(m)?o:n)(h(k),m,O,R,j)},keys:s,values:u}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports})(te)),te.exports}var le={exports:{}},Ne;function Dt(){return Ne||(Ne=1,(function(e){function t(n,o,a,s,u,i,c){try{var l=n[i](c),f=l.value}catch(p){return void a(p)}l.done?o(f):Promise.resolve(f).then(s,u)}function r(n){return function(){var o=this,a=arguments;return new Promise(function(s,u){var i=n.apply(o,a);function c(f){t(i,s,u,c,l,"next",f)}function l(f){t(i,s,u,c,l,"throw",f)}c(void 0)})}}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(le)),le.exports}var fe={exports:{}},pe={exports:{}},de={exports:{}},ve={exports:{}},De;function It(){return De||(De=1,(function(e){var t=U().default;function r(n,o){if(t(n)!="object"||!n)return n;var a=n[Symbol.toPrimitive];if(a!==void 0){var s=a.call(n,o||"default");if(t(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(n)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(ve)),ve.exports}var Ie;function Ft(){return Ie||(Ie=1,(function(e){var t=U().default,r=It();function n(o){var a=r(o,"string");return t(a)=="symbol"?a:a+""}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(de)),de.exports}var Fe;function $t(){return Fe||(Fe=1,(function(e){var t=Ft();function r(n,o,a){return(o=t(o))in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(pe)),pe.exports}var $e;function Gt(){return $e||($e=1,(function(e){var t=$t();function r(o,a){var s=Object.keys(o);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(o);a&&(u=u.filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable})),s.push.apply(s,u)}return s}function n(o){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?arguments[a]:{};a%2?r(Object(s),!0).forEach(function(u){t(o,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach(function(u){Object.defineProperty(o,u,Object.getOwnPropertyDescriptor(s,u))})}return o}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(fe)),fe.exports}var Ge;function Ut(){if(Ge)return D;Ge=1;var e=jt().default,t=qt().default;Object.defineProperty(D,"__esModule",{value:!0}),D._r=k,D._u=N,D.render=m,D.unmount=K;var r=t(Nt()),n=t(Dt()),o=t(U()),a=t(Gt()),s=e(ot()),u=(0,a.default)({},s),i=u.version,c=u.render,l=u.unmountComponentAtNode,f;try{var p=Number((i||"").split(".")[0]);p>=18&&(f=u.createRoot)}catch{}function y(x){var d=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;d&&(0,o.default)(d)==="object"&&(d.usingClientEntryPoint=x)}var h="__rc_react_root__";function _(x,d){y(!0);var w=d[h]||f(d);y(!1),w.render(x),d[h]=w}function v(x,d){c?.(x,d)}function k(x,d){}function m(x,d){if(f){_(x,d);return}v(x,d)}function O(x){return R.apply(this,arguments)}function R(){return R=(0,n.default)((0,r.default)().mark(function x(d){return(0,r.default)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",Promise.resolve().then(function(){var I;(I=d[h])===null||I===void 0||I.unmount(),delete d[h]}));case 1:case"end":return E.stop()}},x)})),R.apply(this,arguments)}function j(x){l(x)}function N(x){}function K(x){return $.apply(this,arguments)}function $(){return $=(0,n.default)((0,r.default)().mark(function x(d){return(0,r.default)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(f===void 0){E.next=2;break}return E.abrupt("return",O(d));case 2:j(d);case 3:case"end":return E.stop()}},x)})),$.apply(this,arguments)}return D}var Ue=Ut();const Wt=(e,t)=>(Ue.render(e,t),()=>Ue.unmount(t));let Yt=Wt;function Bt(e){return Yt}function zt(e){const t=document.createElement("div");return document.body.appendChild(t),Bt()(e,t)}function We(e){const t=b.forwardRef((o,a)=>{const[s,u]=g.useState(!1),i=g.useRef(!1),[c,l]=g.useState(e),f=g.useRef(0);g.useEffect(()=>{i.current?y():u(!0)},[]);function p(){var h,_;i.current=!0,u(!1),(_=(h=c.props).onClose)===null||_===void 0||_.call(h)}function y(){var h,_;n(),(_=(h=c.props).afterClose)===null||_===void 0||_.call(h)}return g.useImperativeHandle(a,()=>({close:p,replace:h=>{var _,v;f.current++,(v=(_=c.props).afterClose)===null||v===void 0||v.call(_),l(h)}})),b.cloneElement(c,Object.assign(Object.assign({},c.props),{key:f.current,visible:s,onClose:p,afterClose:y}))}),r=b.createRef(),n=zt(b.createElement(t,{ref:r}));return{close:()=>st(this,void 0,void 0,function*(){var o,a,s;r.current?(s=r.current)===null||s===void 0||s.close():(n(),(a=(o=e.props).afterClose)===null||a===void 0||a.call(o))}),replace:o=>{var a;(a=r.current)===null||a===void 0||a.replace(o)},isRendered:()=>!!r.current}}const Ye="adm-auto-center",Kt=e=>ze(e,b.createElement("div",{className:Ye},b.createElement("div",{className:`${Ye}-content`},e.children))),L="adm-toast",Ht={maskClickable:!0,stopPropagation:["click"]},Vt=e=>{const t=me(Ht,e),{maskClickable:r,content:n,icon:o,position:a}=t,s=g.useMemo(()=>{if(o==null)return null;switch(o){case"success":return b.createElement(Tt,{className:`${L}-icon-success`});case"fail":return b.createElement(Pt,{className:`${L}-icon-fail`});case"loading":return b.createElement(at,{color:"white",className:`${L}-loading`});default:return o}},[o]),u=g.useMemo(()=>{switch(a){case"top":return"20%";case"bottom":return"80%";default:return"50%"}},[a]);return b.createElement(Ct,{visible:t.visible,destroyOnClose:!0,opacity:0,disableBodyScroll:!r,getContainer:t.getContainer,afterClose:t.afterClose,style:Object.assign({pointerEvents:r?"none":"auto"},t.maskStyle),className:V(`${L}-mask`,t.maskClassName),stopPropagation:t.stopPropagation},b.createElement("div",{className:V(`${L}-wrap`)},b.createElement("div",{style:{top:u},className:V(`${L}-main`,o?`${L}-main-icon`:`${L}-main-text`)},s&&b.createElement("div",{className:`${L}-icon`},s),b.createElement(Kt,null,n))))};let S=null,he=null;const B={duration:2e3,position:"center",maskClickable:!0},Xt=e=>b.createElement(Vt,Object.assign({},e));function Zt(e){var t;const r=me(B,typeof e=="string"?{content:e}:e),n=b.createElement(Xt,Object.assign({},r,{onClose:()=>{S=null}}));return S?!((t=S.isRendered)===null||t===void 0)&&t.call(S)?S.replace(n):(S.close(),S=We(n)):S=We(n),he&&window.clearTimeout(he),r.duration!==0&&(he=window.setTimeout(()=>{Je()},r.duration)),S}function Je(){S?.close(),S=null}function Jt(e){e.duration!==void 0&&(B.duration=e.duration),e.position!==void 0&&(B.position=e.position),e.maskClickable!==void 0&&(B.maskClickable=e.maskClickable)}const Be={show:Zt,clear:Je,config:Jt},Qt=e=>z.post("/auth/login",e),er=e=>z.post("/auth/register",e),tr=e=>z.post("/auth/refresh",{refreshToken:e}),rr=()=>z.post("/auth/profile"),lr=(e,t)=>{const r=new Uint8Array(4);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);const n=new Uint32Array(1),o=new TextEncoder().encode(e);n[0]=o.length;const a=new Uint8Array(r.length+4+o.length);return a.set(r,0),a[4]=n[0]>>24&255,a[5]=n[0]>>16&255,a[6]=n[0]>>8&255,a[7]=n[0]&255,a.set(o,8),a.buffer},fr=e=>{const t=new Uint8Array(e,0,4),r=new Uint8Array(e,4,4),n=new Uint8Array(e,8);let o="";for(let u=0;u<t.length;u++)o+=String.fromCharCode(t[u]);const a=r[0]<<24|r[1]<<16|r[2]<<8|r[3],s=new TextDecoder().decode(n.subarray(0,a));return{type:o,value:s}},pr=e=>/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(e);function dr(e){if(e.length<8||e.length>16)return!1;const t=/[a-zA-Z]/.test(e),r=/\d/.test(e),n=/[^a-zA-Z0-9]/.test(e);return t||r||n}const nr=e=>!e.trim(),or=e=>!nr(e);class sr{accessToken;refreshToken;constructor(){this.accessToken=null,this.refreshToken=localStorage.getItem("refreshToken"),this.refreshToken?setTimeout(()=>{this.refreshAccessToken().then(()=>{this.getUserInfo().then(t=>{X.dispatch(_e(t))})})},0):window.location.href="/#/login"}async getUserInfo(){return await rr()}async login(t){const r=await Qt(t);return this.afterLogin(r)}async register(t){const r=await er(t);return this.afterLogin(r)}afterLogin(t){return this.accessToken=t.access_token,this.refreshToken=t.refresh_token,localStorage.setItem("refreshToken",t.refresh_token),X.dispatch(_e(t.user)),X.dispatch(it({isLogin:!0})),t}async refreshAccessToken(){if(!this.refreshToken)throw new Error("No refresh token available");const t=await tr(this.refreshToken);return this.accessToken=t.access_token,t.access_token}getAccessToken(){return this.accessToken}getRefreshToken(){return this.refreshToken}getIsLogin(){return this.refreshToken!==null&&or(this.refreshToken)}logout(){this.accessToken=null,this.refreshToken=null,localStorage.removeItem("refreshToken")}}const ye=new sr;class ar{client;constructor(t){this.client=Qe.create({baseURL:t,timeout:1e4,headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(r=>{const n=ye.getAccessToken();return n&&(r.headers.Authorization=`Bearer ${n}`),r},r=>Promise.reject(r)),this.client.interceptors.response.use(r=>r.data.code!==200?Promise.reject(new Error(r.data.message)):r.data.data,r=>r.response?.status===401?(console.log(r.config.url),r.config.url==="/auth/refresh"?(ye.logout(),window.location.href="/#/login",Be.show({icon:"!",content:"登录过期，请重新登录",duration:1e3}),Promise.reject(r)):ye.refreshAccessToken().then(n=>n?(r.config.headers.Authorization=`Bearer ${n}`,this.client(r.config)):Promise.reject(r))):(r.response?.status===400&&Be.show({icon:"!",content:r.response.data.message,duration:1e3}),Promise.reject(r)))}async request(t){return await this.client.request(t)}async get(t,r){return this.request({method:"GET",url:t,params:r})}async post(t,r){return this.request({method:"POST",url:t,data:r})}async put(t,r){return this.request({method:"PUT",url:t,data:r})}async delete(t,r){return this.request({method:"DELETE",url:t,params:r})}}const z=new ar("http://1.94.253.218:8888/api/v1/usr/");export{Tt as C,Ct as M,Be as T,Pt as a,ye as b,z as c,dr as d,pr as i,lr as s,fr as t};
