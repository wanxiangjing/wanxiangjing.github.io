import{f as d,u as p}from"./store-vendor-BtW7VYLY.js";import{A as b,B as m,C as l,D as f}from"./index-C7R3IaCj.js";import{t as M,s as A}from"./index-DQn4vhZc.js";class C{debug(...t){console.debug(...t)}log(...t){console.log(...t)}error(...t){console.error(...t)}warn(...t){console.warn(...t)}}const r=new C;var h=(e=>(e[e.NONE=0]="NONE",e[e.HIGH=1]="HIGH",e[e.MEDIUM=2]="MEDIUM",e[e.LOW=3]="LOW",e))(h||{});const y=()=>{const e=d(),t=p(a=>a.rtcClient.RtcClient),c={conv:a=>{const{Stage:s}=a||{},{Code:o,Description:n}=s||{};switch(r.debug("[MESSAGE_TYPE.BRIEF]: ",o,n),o){case 2:e(f({isAIThinking:!0}));break;case 3:e(l({isAITalking:!0}));break;case 5:e(l({isAITalking:!1}));break;case 4:e(m());break}},subv:a=>{const s=a.data?.[0]||{};if(s){const{text:o,definite:n,userId:i,paragraph:g}=s;console.log("util==>",o,s);const u=t?.getAgentEnabled();window._debug_mode&&r.debug("handleRoomBinaryMessageReceived",s),u&&e(b({text:o,user:i,paragraph:g,definite:n}))}},tool:a=>{const s=a?.tool_calls?.[0]?.function?.name;console.log("[Function Call] - Called by sendUserBinaryMessage");const o={getcurrentweather:"今天下雪， 最低气温零下10度"};t?.engine.sendUserBinaryMessage("RobotMan_",A(JSON.stringify({ToolCallID:a?.tool_calls?.[0]?.id,Content:o[s.toLocaleLowerCase().replaceAll("_","")]}),"func"))}};return{parser:a=>{try{const{type:s,value:o}=M(a);c[s]?.(JSON.parse(o))}catch(s){r.debug("parse error",s)}}}};export{h as I,r as l,y as u};
